#!/usr/bin/env bash

# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘  ðŸŒ² WOODS WALLPAPER SETUP SCRIPT                                  â•‘
# â•‘  Sets woods.png for both hyprpaper and hyprlock                  â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

set -euo pipefail

# Colors for output
NORD_GREEN='\033[38;2;163;190;140m'
NORD_BLUE='\033[38;2;129;161;193m'
NORD_RED='\033[38;2;191;97;106m'
NORD_RESET='\033[0m'

WOODS_PATH="$HOME/Downloads/woods.png"
WALLPAPER_DIR="$HOME/Pictures/Wallpapers"

echo -e "${NORD_BLUE}ðŸŒ² Woods Wallpaper Setup${NORD_RESET}"
echo "=================================="

# Check if woods.png exists
if [[ ! -f "$WOODS_PATH" ]]; then
    echo -e "${NORD_RED}âŒ woods.png not found in Downloads${NORD_RESET}"
    echo "Please make sure woods.png is in ~/Downloads/"
    exit 1
fi

echo -e "${NORD_GREEN}âœ… Found woods.png${NORD_RESET}"

# Create wallpaper directory if it doesn't exist
mkdir -p "$WALLPAPER_DIR"

# Copy woods.png to wallpapers directory
cp "$WOODS_PATH" "$WALLPAPER_DIR/"
echo -e "${NORD_GREEN}âœ… Copied woods.png to wallpapers directory${NORD_RESET}"

# Update hyprpaper configuration
echo -e "${NORD_BLUE}ðŸ–¼ï¸ Updating hyprpaper configuration...${NORD_RESET}"
cat > ~/.config/hypr/hyprpaper.conf << EOF
# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘  ðŸŒ² HYPRPAPER CONFIGURATION - WOODS WALLPAPER                     â•‘
# â•‘  Monitor: LG UltraGear+ 4K @ 144Hz                               â•‘
# â•‘  Wallpaper: woods.png                                            â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Preload the wallpaper (loads it into memory for better performance)
preload = $WALLPAPER_DIR/woods.png

# Set the wallpaper for your main monitor (DP-1)
wallpaper = DP-1,$WALLPAPER_DIR/woods.png

# If you want the same wallpaper on any additional monitors
wallpaper = ,$WALLPAPER_DIR/woods.png

# Disable splash screen (faster startup)
splash = false

# Enable ipc for runtime control
ipc = on
EOF

# Update hyprlock configuration to use woods.png
echo -e "${NORD_BLUE}ðŸ”’ Updating hyprlock configuration...${NORD_RESET}"
sed -i "s|path = screenshot|path = $WALLPAPER_DIR/woods.png|g" ~/.config/hypr/hyprlock.conf

# Restart hyprpaper to apply new wallpaper
echo -e "${NORD_BLUE}ðŸ”„ Applying new wallpaper...${NORD_RESET}"
pkill hyprpaper 2>/dev/null || true
sleep 1
hyprpaper &

echo -e "${NORD_GREEN}ðŸŽ‰ Woods wallpaper applied successfully!${NORD_RESET}"
echo "- Hyprpaper: Using woods.png as desktop wallpaper"
echo "- Hyprlock: Using woods.png as lock screen background"
echo ""
echo "You can also use your wallpaper manager:"
echo "  wallpaper-manager set $WALLPAPER_DIR/woods.png"